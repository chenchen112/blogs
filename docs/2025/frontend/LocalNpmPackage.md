# å¦‚ä½•è°ƒè¯•æœ¬åœ°çš„ npm åŒ…

åœºæ™¯ä¸€ï¼šåœ¨è¿›è¡Œæ‹†åŒ…å·¥ä½œä¸­ï¼Œå¦‚ä½•æµ‹è¯•æ‹†å‡ºæ¥çš„å­åŒ…é€šè¿‡ä¾èµ–çš„æ–¹å¼å¼•å…¥åèƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Ÿ

åœºæ™¯äºŒï¼šé¡¹ç›®ä¸­ä¾èµ–çš„ç§æœ‰ç»„ä»¶åº“å‡ºç°äº† bugï¼Œæœ¬åœ°ä¿®å¤åå¦‚ä½•åœ¨é¡¹ç›®ä¸­æµ‹è¯•éªŒè¯ï¼Ÿ

## æ–¹å¼ä¸€

æ¯”è¾ƒç®€å•ç²—æš´çš„æ–¹å¼é‚£å°±å‘ä¸ªç‰ˆå§ï¼Œé‡æ–° install

ç¼ºç‚¹æ˜¯ï¼Œæ“ä½œéº»çƒ¦ï¼Œæ•ˆç‡ä½ï¼Œæ±¡æŸ“ npm ç‰ˆæœ¬çº¿


## æ–¹å¼äºŒ

é€šè¿‡ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„å¼•ç”¨

```javascript
import { Item } from 'C:/packageA//dist'
```

è™½ç„¶ä¸ç”¨å‘ç‰ˆäº†ï¼Œä½†æ˜¯æ¯”è¾ƒå±é™©ï¼Œä¸‡ä¸€ä»£ç å°±ç›´æ¥æäº¤äº†å‘¢ï¼Œè€Œä¸” Code Review æ—¶ä¹Ÿå®¹æ˜“å¿½ç•¥ import


## æ–¹å¼ä¸‰

ä¸ä¸Šè¿°æ–¹å¼äºŒæ€è·¯ç±»ä¼¼ï¼Œç›´æ¥ä¿®æ”¹ dependencies

```json
{
  "dependencies": {
    "packageA": "file: å®é™…åŒ…åœ°å€ ",
    // "packageA": "link: å®é™…åŒ…åœ°å€ "
  }
}
```

ä¹Ÿå­˜åœ¨ä¸Šè¿°ç›´æ¥æäº¤çš„éšæ‚£ï¼Œå¹¶ä¸”ä½ çš„ lock æ–‡ä»¶é€šå¸¸ä¹Ÿä¼šä¸å¯¹åŠ²

## æ–¹å¼å››

ç›¸å¯¹ä¼˜é›…çš„ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ `npm link`

åœ¨ packageA ä¸‹æ‰§è¡Œ `npm link`ï¼Œé¦–å…ˆä¼šè¿›è¡Œä¸€æ¬¡æ‰“åŒ…ï¼Œç„¶åå°†æ‰“åŒ…äº§ç‰©é€šè¿‡è½¯é“¾æ¥çš„æ–¹å¼æ³¨å†Œåˆ°å…¨å±€çš„ node_modules

åœ¨éœ€è¦ä½¿ç”¨çš„é¡¹ç›®å†…æ‰§è¡Œ `npm link packageA` å°±èƒ½ç›´æ¥ä½¿ç”¨äº†

å¯ä»¥ä½¿ç”¨ `npm unlink` å»é™¤è½¯è¿æ¥

```shell
# packageA
npm link 

# project
npm link packageA

# project
npm unlink projectA

# packageA
npm unlink

```

ç¼ºç‚¹æ˜¯æ¯æ¬¡å¯¹äº packageA çš„ä¿®æ”¹éƒ½éœ€è¦é‡æ–°æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œé‡æ–°æ‰“åŒ…

å¹¶ä¸”å¦‚æœç»„ä»¶å’Œåº”ç”¨éƒ½ä½¿ç”¨äº†åŒä¸€ä¸ªä¾èµ–ï¼Œå®ƒä»¬ä¼šåœ¨å„è‡ªçš„ node_modules å»æŸ¥æ‰¾ï¼Œå¦‚æœè¿™ä¸ªä¾èµ–ä¸æ”¯æŒå¤šä¾‹ï¼Œåº”ç”¨å°±ä¼šå¼‚å¸¸

## æ–¹å¼äº” ğŸ‘

ä½¿ç”¨å¼€æºé¡¹ç›® [yalc](https://github.com/wclr/yalc) 5.9k â­

> Work with yarn/npm packages locally like a boss.
> 
> Better workflow than npm | yarn link for package authors.

å®ƒçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿° `npm link` æ‰€å­˜åœ¨çš„ç¼ºé™·

```shell
# å®‰è£…æ–¹å¼
npm i yalc -g

# å‘å¸ƒåŒ…ï¼Œåœ¨ packageA ä¸­æ‰§è¡Œ
yalc publish

# æ·»åŠ åŒ…ï¼Œåœ¨ project ä¸­æ‰§è¡Œ
yalc add packageA

# æ›´æ–°åŒ…ï¼Œåœ¨ packageA ä¸­æ‰§è¡Œ
npm run build
yalc push

# ç§»é™¤åŒ…ï¼Œåœ¨ project ä¸­æ‰§è¡Œ
yalc remove packageA
```

- ä¸ä¼šç§»é™¤æ—§çš„ packageA ä¾èµ–ï¼Œåªæ˜¯æ‰˜ç®¡åˆ°äº†ä¸€ä¸ªç¼“å­˜åŒºåŸŸï¼Œå½“ä½ æ‰§è¡Œ remove æ—¶ä¼šè‡ªåŠ¨è¿˜åŸ
- å¦‚æœ packageA å’Œ project æœ‰åŒä¸€ä¸ªä¾èµ–ï¼Œä¼šä½¿ç”¨ project çš„ä¾èµ–
- å¦‚æœæƒ³å®ç°è‡ªåŠ¨ build å push ï¼Œå¯ä»¥è€ƒè™‘ç»“åˆ [nodemon](https://github.com/remy/nodemon) 26.5k â­
